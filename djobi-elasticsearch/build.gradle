ext {
    variants = [
        [name: "es7"]
    ]
}

configurations {
    es7

    testRuntimeOnly.extendsFrom es7
    compileOnly.extendsFrom es7
}

dependencies {
    compileOnly project(':djobi-core')
    compileOnly project(path: ':djobi-core', configuration: "spark")
    compileOnly project(path: ':djobi-core', configuration: "djobiCore")

    testImplementation(testFixtures(project(":djobi-core")))

    // Upgrade to 6.3.X because https://github.com/elastic/elasticsearch-hadoop/issues/1139
    /*es24(group: 'org.elasticsearch', name: 'elasticsearch-spark-30_' + scalaVersion, version:'7.14.0') {
        exclude group: "org.scala-lang"
    }*/

    es7(group: 'org.elasticsearch', name: 'elasticsearch-spark-30_' + scalaVersion, version:'7.14.0') {
        exclude group: "org.scala-lang"
    }
}

djobi.createReleaseWithVariants(variants)